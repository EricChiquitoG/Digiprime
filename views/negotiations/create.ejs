<% layout('layouts/boilerplate') %>

<div class="container mt-3">
  <div class="row">
    <div class="col-sm-6">
      <div class="card mb-3">
        <a href="<%= baseUrl %>/offers/<%= offer._id %>">
          <% if (offer.images.length) {%>
          <img class="img-fluid" alt="" src="<%=offer.images[0].url%> " />
          <% }else { %>
          <img
            class="img-fluid"
            alt=""
            src="https://res.cloudinary.com/diq0t2bqj/image/upload/v1622925764/YelpCamp/kjhxxshjrdudgkoehoyl.jpg"
          />
          <% } %>
        </a>
        <div class="d-flex flex-row">
          <h2 class="my-3 mx-4">
            <a href="<%= baseUrl %>/offers/<%= offer._id %>"
              ><%= offer.title %></a
            >
          </h2>
          <span class="badge bg-success my-4"> <%= offer.costumer %> </span>
        </div>

        <ul class="list-group list-group-flush">
          <li class="list-group-item"><%= offer.description %></li>
          <li class="list-group-item text-muted"><%= offer.location %></li>
          <li class="list-group-item">$<%= offer.price %> / Piece</li>
          <li class="list-group-item">
            Submitted by
            <a href="<%= baseUrl %>/profile/<%= offer.author.username %>"
              ><%= offer.author.username %></a
            >
          </li>
        </ul>
      </div>
    </div>

    <div class="col-sm-4">
      <form
        method="POST"
        action="<%= baseUrl %>/negotiations/create/<%=offer._id%>"
      >
        <div class="form-floating mb-3">
          <input
            type="text"
            class="form-control"
            id="title"
            aria-describedby="title"
            name="title"
            value=""
            placeholder="Title"
            required
          />
          <label for="title">Title</label>
        </div>

        <div class="form-floating mb-3">
          <input
            type="number"
            class="form-control"
            id="quantity"
            name="quantity"
            value=""
            placeholder="Amount"
            required
          />
          <label for="quantity" class="form-label">Amount</label>
          <div id="priceHelpBlock" class="form-text px-1">
            Units to negotiate about
          </div>
        </div>

        <div class="mb-3">
          <div class="input-group">
            <input
              type="number"
              class="form-control"
              id="price"
              aria-label="Dollar amount (with dot and two decimal places)"
              name="price"
              value=""
              placeholder=""
              required
            />
            <span class="input-group-text">$</span>
          </div>
          <div id="priceHelpBlock" class="form-text px-1">
            Initial price to start negotiation with
          </div>
        </div>

        <%- include('../partials/contract-select-id', { contracts }) %>

        <button type="submit" class="btn btn-primary mt-3">Submit</button>
      </form>
    </div>
  </div>
</div>
